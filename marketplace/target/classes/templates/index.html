<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Na Loja Tem - Marketplace</title>
    <!-- REMOVER isso: -->
    <!-- xmlns:sec="http://www.thymeleaf.org/extras/spring-security" -->
    <link rel="stylesheet" th:href="@{/estilos/style.css}">
    <link rel="stylesheet" th:href="@{/estilos/home.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<header th:replace="~{cabecalho :: header}"></header>

<main>
    <section class="destaques">
        <div class="container">
            <h2 class="section-title">Produtos em Destaque</h2>
            <div class="carrossel-container">
                <div class="carrossel" th:if="${not #lists.isEmpty(produtosDestaque)}">
                    <div class="produto-card" th:each="produto : ${produtosDestaque}" th:data-produto-id="${produto.id}">
                        <div class="produto-img">
                            <img th:src="${produto.fotoUrl != null ? produto.fotoUrl : '/imagens/Logo.png'}" th:alt="${produto.nome}">
                        </div>
                        <div class="produto-info">
                            <h3 th:text="${produto.nome}">Nome do Produto</h3>
                            <p class="produto-descricao" th:text="${produto.descricao}">Descrição do produto</p>
                            <div class="produto-preco" th:text="${'R$ ' + #numbers.formatDecimal(produto.preco, 1, 2, 'POINT')}">R$ 0,00</div>
                            <div class="produto-acoes">
                                <button class="btn-add-carrinho"
                                        th:attr="data-produto-id=${produto.id}, data-produto-nome=${produto.nome}, data-produto-preco=${produto.preco}">
                                    <i class="fas fa-shopping-cart"></i> Adicionar ao Carrinho
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div th:if="${#lists.isEmpty(produtosDestaque)}" class="mensagem-vazia">
                    <h3>Nenhum produto em destaque no momento.</h3>
                </div>
            </div>
        </div>
    </section>

    <section class="categorias">
        <div class="container">
            <h2 class="section-title">Navegue por Categorias</h2>
            <div class="categorias-grid">
                 <a th:href="@{/lojas?categoria=construcao}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/construcao.jpg}" alt="Construção">
                    <h3>Construção</h3>
                </a>
                <a th:href="@{/lojas?categoria=papelaria}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/papelaria.jpg}" alt="Papelaria">
                    <h3>Papelaria</h3>
                </a>
                <a th:href="@{/lojas?categoria=games}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/games.jpg}" alt="Games">
                    <h3>Games</h3>
                </a>
                <a th:href="@{/lojas?categoria=esportes}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/esportes.jpg}" alt="Esportes">
                    <h3>Esportes</h3>
                </a>
                <a th:href="@{/lojas?categoria=livros}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/livraria.jpg}" alt="Livros">
                    <h3>Livros</h3>
                </a>
                <a th:href="@{/lojas?categoria=roupas}" class="categoria-card">
                    <img th:src="@{/imagens/categorias/roupas.jpg}" alt="Roupas">
                    <h3>Roupas</h3>
                </a>
            </div>
        </div>
    </section>

    <section class="recomendados">
        <div class="container">
            <h2 class="section-title">Lojas Recomendadas</h2>
            <div class="lojas-grid" th:if="${not #lists.isEmpty(lojas)}">
                <a th:href="@{/loja/{id}(id=${loja.id})}" class="loja-card" th:each="loja : ${lojas}">
                    <img th:src="${loja.fotoUrl != null ? (loja.fotoUrl.startsWith('/') ? loja.fotoUrl : '/uploads/' + loja.fotoUrl) : '/imagens/Logo.png'}" th:alt="${loja.nome}">
                    <h3 th:text="${loja.nome}">Nome da Loja</h3>
                </a>
            </div>
            <div th:if="${#lists.isEmpty(lojas)}" class="mensagem-vazia">
                <h3>Nenhuma loja recomendada no momento.</h3>
            </div>
        </div>
    </section>


    <section class="cta">
        <div class="container">
            <h2>Tem uma loja?</h2>
            <p>Junte-se ao Na Loja Tem e alcance milhares de novos clientes!</p>
            <a th:href="@{/cadastro-loja}" class="btn-cta">
                <i class="fas fa-plus"></i> Crie sua loja
            </a>
        </div>
    </section>
</main>

<footer th:replace="~{rodape :: footer}"></footer>

<script th:src="@{/scripts/main.js}"></script>
<script th:src="@{/scripts/header.js}"></script>
<script th:src="@{/scripts/home.js}"></script>
</body>
</html>